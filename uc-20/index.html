



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://jajir.github.io/postman/uc-20/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>UC-20 - UC-29 - Postman</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#dispecer" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://jajir.github.io/postman/" title="Postman" aria-label="Postman" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Postman
            </span>
            <span class="md-header-nav__topic">
              
                UC-20 - UC-29
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://jajir.github.io/postman/" title="Postman" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Postman
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../analyza/" title="Analýza" class="md-nav__link">
      Analýza
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Usecases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Usecases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../uc-00/" title="UC-04 - UC-07" class="md-nav__link">
      UC-04 - UC-07
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../uc-10/" title="UC-10 - UC-13" class="md-nav__link">
      UC-10 - UC-13
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        UC-20 - UC-29
      </label>
    
    <a href="./" title="UC-20 - UC-29" class="md-nav__link md-nav__link--active">
      UC-20 - UC-29
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#stitek-na-baliku" class="md-nav__link">
    Štítek na balíku
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-20-prijeti-baliku" class="md-nav__link">
    UC-20 - Přijetí balíků
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-21-zpracovani-prijatych-baliku" class="md-nav__link">
    UC-21 - Zpracování přijatých balíků
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#proces-cteni-informaci-z-baliku" class="md-nav__link">
    Proces čtení informací z balíku
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reseni-pripadne-poskozeneho-baliku-a-tisk-stitku" class="md-nav__link">
    Řešení případně poškozeného balíku a tisk štítku
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mereni-vazeni-a-trizeni-baliku-do-front" class="md-nav__link">
    Měření, vážení a třízení balíku do front
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-22-zpracovani-baliku-cekajicich-na-zaplaceni" class="md-nav__link">
    UC-22 - Zpracování balíků čekajících na zaplacení
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-23-zpracovani-baliku-ve-fronte-dopravce" class="md-nav__link">
    UC-23 - Zpracování balíků ve frontě dopravce
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-24-zpracovani-baliku-v-chybove-fronte" class="md-nav__link">
    UC-24 - Zpracování balíků v 'chybové' frontě
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-25-predani-baliku-dopravci" class="md-nav__link">
    UC-25 - Předání balíků dopravci
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-26-prijem-nedorucenych-baliku-od-dopravce" class="md-nav__link">
    UC-26 - Příjem nedoručených balíků od dopravce
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-27-ztraceny-interni-stitek" class="md-nav__link">
    UC-27 - Ztracený interní štítek
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-28-balik-ve-spatne-fronte" class="md-nav__link">
    UC-28 - Balík ve špatné frontě
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-29-rozdeleni-jednoho-baliku-na-vic" class="md-nav__link">
    UC-29 - Rozdělení jednoho balíku na víc
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-210-tisk-a-nalepeni-stitku" class="md-nav__link">
    UC-210 - Tisk a nalepení štítku
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../uc-30/" title="UC-31 - UC-36" class="md-nav__link">
      UC-31 - UC-36
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../uc-40/" title="UC-40 - UC-49" class="md-nav__link">
      UC-40 - UC-49
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../uc-50/" title="UC-50 - UC-65" class="md-nav__link">
      UC-50 - UC-65
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../states/" title="Stavy" class="md-nav__link">
      Stavy
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../templates/" title="Šablony" class="md-nav__link">
      Šablony
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../screens/" title="Obrazovky" class="md-nav__link">
      Obrazovky
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../architecture/" title="Architektura" class="md-nav__link">
      Architektura
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../implementation/" title="Implementace" class="md-nav__link">
      Implementace
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../phase2/" title="Fáze 2" class="md-nav__link">
      Fáze 2
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../meetings/" title="Schůzky" class="md-nav__link">
      Schůzky
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../notes/" title="Poznámky" class="md-nav__link">
      Poznámky
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../changelog/" title="Změny" class="md-nav__link">
      Změny
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../how-to-contribute/" title="Jak přispět" class="md-nav__link">
      Jak přispět
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#stitek-na-baliku" class="md-nav__link">
    Štítek na balíku
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-20-prijeti-baliku" class="md-nav__link">
    UC-20 - Přijetí balíků
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-21-zpracovani-prijatych-baliku" class="md-nav__link">
    UC-21 - Zpracování přijatých balíků
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#proces-cteni-informaci-z-baliku" class="md-nav__link">
    Proces čtení informací z balíku
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reseni-pripadne-poskozeneho-baliku-a-tisk-stitku" class="md-nav__link">
    Řešení případně poškozeného balíku a tisk štítku
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mereni-vazeni-a-trizeni-baliku-do-front" class="md-nav__link">
    Měření, vážení a třízení balíku do front
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-22-zpracovani-baliku-cekajicich-na-zaplaceni" class="md-nav__link">
    UC-22 - Zpracování balíků čekajících na zaplacení
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-23-zpracovani-baliku-ve-fronte-dopravce" class="md-nav__link">
    UC-23 - Zpracování balíků ve frontě dopravce
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-24-zpracovani-baliku-v-chybove-fronte" class="md-nav__link">
    UC-24 - Zpracování balíků v 'chybové' frontě
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-25-predani-baliku-dopravci" class="md-nav__link">
    UC-25 - Předání balíků dopravci
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-26-prijem-nedorucenych-baliku-od-dopravce" class="md-nav__link">
    UC-26 - Příjem nedoručených balíků od dopravce
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-27-ztraceny-interni-stitek" class="md-nav__link">
    UC-27 - Ztracený interní štítek
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-28-balik-ve-spatne-fronte" class="md-nav__link">
    UC-28 - Balík ve špatné frontě
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-29-rozdeleni-jednoho-baliku-na-vic" class="md-nav__link">
    UC-29 - Rozdělení jednoho balíku na víc
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uc-210-tisk-a-nalepeni-stitku" class="md-nav__link">
    UC-210 - Tisk a nalepení štítku
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="dispecer">Dispečer</h1>
<p>Dispečer je na depu. Depo je místo, kam se doručují balíky a z něho zase vydávají dalšímu doručování. Z depa se balíky vydávají dopravci. Dopravce je doručí koncovému adresátovy, nebo se mohou doručit do dalšího depa. V aktuální verzi s posílaním do dalšího depa nepočítáme. </p>
<p>Balíky jsou rozděleny do takzvaných front. Fyzicky to mohou být například regály. Fronty jsou místa, kde jsou balíky umístěny do dalšího zpracování. Fronty jsou tyto:</p>
<ul>
<li>Přijímací fronta - Zde jsou balíky čekající na zpracování v <a href="./#UC-21" title="UC-21">UC-21</a>.</li>
<li>Čekací fronta - Zde balíky čekají, až zákazník zaplatí za přepravu.</li>
<li>Chybová fronta - Fronta pro chybové balíky. Které například nelze dohledat v systému, nemají kód nebo hrubě neodpovídají rozměry.</li>
<li>Fronty pro dopravce - Každý dopravce bude mít svojí frontu, ze které mu budem balíky připravovat na vydání. Bude to například fronta pro DPD.</li>
</ul>
<h3 id="stitek-na-baliku">Štítek na balíku</h3>
<p>Při oběhu balíku v depu v některých případech použijeme místo interního štítku štítek dopravce. K tomu, aby to bylo možné, musí dopravce poskytnout nějaký způsob, jak balíku přidělit identifikační číslo, případně další vyžadované informace dřív, než balík předáme k dopravě. Například poskytne číselnou řadu, z které budeme balíkum přidělovat čísla. Dále musí mít na balíku čárový kód, který nám umožní rychlou identifikaci balíku. Identifikace balíku s štítkem dopravce, nesmí být složitějí než identifikace balíku s interním štítkem. Také nesmí vadit, že se může stát, že některá přidělené Id nevyužijeme. Například když zákazník zruší objednávku.</p>
<h2 id="uc-20-prijeti-baliku"><a name="UC-20"></a>UC-20 - Přijetí balíků</h2>
<p>Dispečer přijme balíky od dopravce a dá je do přijímací fronty k dalšímu zpracování. Dispečer potvrdí převzetí balíku podepsáním protokolu dopravce.</p>
<h2 id="uc-21-zpracovani-prijatych-baliku"><a name="UC-21"></a>UC-21 - Zpracování přijatých balíků</h2>
<p>Přijate balíky je třeba vložit do systému. Dispečer bude frontu balíků zpracovávat následovně: </p>
<p><img alt="Proces zpracování přijatých balíků" src="../diagrams/out/uc-21-activity-1.png" title="Proces zpracování přijatých balíků" /></p>
<h3 id="proces-cteni-informaci-z-baliku">Proces čtení informací z balíku</h3>
<p>Dispečer si na <a href="../screens/#S-01">S-01 základním rozcestníku</a> vybere odkaz pro zpracování přijatých balíků. Tím se mu zobrazí první stránka <a href="../screens/#S-200">S-200 pro zadání kódu balíku</a>. Dispečer zadá kód balíku, nebo stiskne tlačítko, že balík nemá kód. V případě, balík nemá kód se zobrazí stránka <a href="../screens/#S-201">S-201 pro zadání adresy odesílatele</a>. V případě, že balík má kód, systém se pokusí napojit balík na objednávku. Pokud se to nepovede systém požádá dispečera o zadání adresy odesílate <a href="../screens/#S-201">S-201</a>. Pokud se balík spáruje s objednávkou podle kódu balíku systém požádá o <a href="../screens/#S-202">ověření adresy odesílatele na stránce S-202</a>.</p>
<p>Pokud má balík kód odpovídající nějaké objednávce a zároveň nesedí adresa odesílatele na balíku, pak balík spojí s touto objednávkou a sytém požádá dispečera o <a href="../screens/#S-201">zadání této odlišné adresy na S-201</a>. Balík dál zpracujem.</p>
<p>Zpracovaní jednoho balíku je pro srozumitelnost na samostatném obrázku:</p>
<p><img alt="Proces čtení informací z balíku" src="../diagrams/out/uc-21-activity-2.png" title="Proces čtení informací z balíku" /></p>
<p>V tomto stavu máme všechny dostupné informace o balíku zaznamenané.</p>
<h3 id="reseni-pripadne-poskozeneho-baliku-a-tisk-stitku">Řešení případně poškozeného balíku a tisk štítku</h3>
<p><strong>TODO přidat odkaz na UC-210</strong></p>
<p>Ve všech případech dispečer na balík tiskne <a href="../templates/#T-06">interní štítek</a>. Interní štítek musí byt nalepen tak, aby nepřekrýval informace, které na balík zadal odesílatel. Informace od odesílatele se mohou hodit pro pozdější řešení chyb.</p>
<p>Proces začíná na obrazovce <a href="../screens/#S-203">S-203</a>, kde dispečer musí rozhodnout, jestli je balík poškozen nebo ne. Jedná se o poškození obalu, nebo poškození celého balíku, které by ztížilo nebo znemožnilo další doručovaní.</p>
<p>Pokud balík není poškozen, pak lze tisknout štítek na balík. Pokud to lze, pak systém zobrazí stránku <a href="../screens/#S-212">S-212 pro tisk štítku dopravce</a>, jinak zobrazí <a href="../screens/#S-205">stránku S-205 pro tisk interního štítku</a>, který se vytiskne podle <a href="../templates/#T-06">šablony interního štítku</a>. Pokud je balík poškozen pak se zobrazí stránka <a href="../screens/#S-204">S-204 pro popsání míry poškození a několik fotek</a>. Na stránce se také dispečer musí rozhodnout, jestli lze balík přebalit a posunout dál do procesu doručení. Pokud balík nelze přebalit, pak se vytiskne interní štítek, dispečer zadá rozměry, váhu a balík putuje do chybové fronty. Pokud lze balík přebalit zobrazí se jednoduchá stránka  <a href="../screens/#S-206">S-206 pro zadání spotřeby obalového materiálu</a>. Pak se vytiskne interní štítek.</p>
<p><img alt="Proces zpracování balíku" src="../diagrams/out/uc-21-activity-3.png" title="Proces zpracování balíku" /></p>
<p>Pokud balík nemáme v chybové frontě, můžem jít k poslednímu kroku."</p>
<h3 id="mereni-vazeni-a-trizeni-baliku-do-front">Měření, vážení a třízení balíku do front</h3>
<p>V tomto kroku máme balík opatřený interním štítkem. Poslední krok začíná obrazovkou <a href="../screens/#S-207">S-207 pro vážení a měření</a>. Máme-li z předchozího procesu napárovanou objednávku na balík systém vyhodnotí jestli je balík zaplacen a k jakému dopravci má dál pokračovat a podel toho vybere frontu. Pokud nebyl balík spárován s objednávkou pak půjde do chybové fronty. Informace o další frontě bude na <a href="../screens/#S-208">obrazovce S-208</a>. Proces je detailně vidět z následujícího obrázku:</p>
<p><img alt="Proces zpracování balíčku s kódem" src="../diagrams/out/uc-21-activity-4.png" title="Proces zpracování balíčku s kódem" /></p>
<p>To jestli naměřené rozměry odpovídají těm, které zadal zákazník do objednávky zjistíme následovně. Seřadíme hodnoty ż obou skupin podle velikosti a pak navzájem porovnáme od nejmenší dvojice po nejvyšší. Tím odstraníme chybu, kdy zákazník zadá rozměry ve špatném pořadí. Jednotlivé hodnoty porovnáme tak, že pokud se budou lišit o méně než 5 cm, pak je budem považovat za shodné. Pokud se dále nebudou odlišovat o více než 10%, pak je budem považovat za shodné. Váha se bude porovnávat s tolerancí 10%.</p>
<p>Ve všech případech balík změříme a zvážíme. Po tom, co se dispečer dostane <a href="../screens/#S-208">obrazovku S-208</a> se může rozhodnout, jestli chce pokračovat v zadávání nebo zadávání ukončit.</p>
<h2 id="uc-22-zpracovani-baliku-cekajicich-na-zaplaceni"><a name="UC-22"></a>UC-22 - Zpracování balíků čekajících na zaplacení</h2>
<p>Dispečer v systému otevře stránku pro zpracování balíků čekajících na zaplacení. Pak začne zpracovávat balíky jeden po druhém v libovolném poředí.</p>
<p>Proces začíná na obrazovce <a href="../screens/#S-209">S-209 pro načtení interního štítku</a>. Pak podle toho do jaké fronty má balík přijít systém informuje dispečera <a href="../screens/#S-208">obrazovkou S-208</a></p>
<p><img alt="Proces zpracování čekajících balíků" src="../diagrams/out/uc-22-activity.png" title="Proces zpracování čekajících balíků" /></p>
<p>Do chybové fronty se balík přesune například, když zákazník nezaplatí déle než definovanou dobu a pracovníkovi podpory se jestě nepodařilo se zákazníkem domluvit co s balíckem dál dělat.</p>
<p>Dispečer se může kdykoliv během zpracovávání fronty rozhodnout činnost přerušit.</p>
<h2 id="uc-23-zpracovani-baliku-ve-fronte-dopravce"><a name="UC-23"></a>UC-23 - Zpracování balíků ve frontě dopravce</h2>
<p><strong>TODO přidat odkaz na UC-210</strong></p>
<p>Dispečer v systému otevře stránku pro zpracování fronty konkrétního dopravce. Pak začne zpracovávat jeden balík po druhém v libovolném pořadí takto:</p>
<p>Čtečkou čárových kódů načte z interního štítku kód balíčku. Systém požádá o zvážení balíku. Dispečer ho zváží. Po vážení se aktuální váha balíku porovná s hodnotou naměřenou po nalepení interního štítku na balík. To by mělo snížit pravděpodobnost, že dojde k záměně balíků, nebo jiné chybě. Pokud váha nesedí balík bude vložen do chybové fronty. Pokud váha odpovídá, systém zobrazí <a href="../screens/#S-212">stránku S-212 pro tisk štítku dopravce</a>.</p>
<p><img alt="Zpracování balíků ve frontě dopravce'" src="../diagrams/out/uc-23-activity.png" title="Zpracování balíků ve frontě dopravce" /></p>
<p>Pokud se balík posílá po ČR použijeme Českou poštu. Proto musí v depu existovat fronta pro Českou poštu. V případě chyby potřebujeme poslat balík zpět zákazníkovy.</p>
<p>Dispečer se může rozhodnout, že činnost přeruší i když je fronta k doručení zpracovaná jen částečně.</p>
<h2 id="uc-24-zpracovani-baliku-v-chybove-fronte"><a name="UC-24"></a>UC-24 - Zpracování balíků v 'chybové' frontě</h2>
<p>Dispečer v systému otevře stránku pro zpracování chybové fronty. Všechny balíky bude pojednom brát a zpracovávat. V případě problému se spojí s pracovníkem podpory a společně se pokusí domluvit se na dalším postupu. Po tom co dispečer naskenuje interní štítek na <a href="../screens/#S-209">obrazovce S-209 pro načtení interního štítku</a> systém vyhodnotí jestli je balík možné poslat dál, nebo má ještě počkat ve frontě. Případně pomocí <a href="../screens/#S-210">obrazovnky S-210</a> lze požádat dispečera o nějakou další akci s balíkem.</p>
<p><img alt="Proces zpracování chybových balíků" src="../diagrams/out/uc-24-activity.png" title="Proces zpracování chybových balíků" /></p>
<p>Když systém ví, do jaké fronty má balík pokračovat, nebo co se s ním má stát, pak se zobrazí <a href="../screens/#S-208">obrazovka S-208</a>. Pokud není stále jasné, co se má s balíkem stát, zobrazí se obrazovka pro <a href="../screens/#S-053">řešení poškozeného balíku S-053</a> nebo obrazovka s detailem <a href="../screens/#S-054">chyby při zpracování balíku S-054</a>. Na chybových obrazovkách bude tlačítko na pokračování na další načítání čárového kódu.</p>
<h2 id="uc-25-predani-baliku-dopravci"><a name="UC-25"></a>UC-25 - Předání balíků dopravci</h2>
<p>Před tím než dispečer předá balíky z příslušné fronty dopravci, musí připravit předávací protokol. Dispečer v systému najde příslušnou frontu dopravce a stiskne na ní, že jí chce ukončit. na to mu systém vygeneruje předávací protokol, případně jeho kopii.</p>
<p>Když pro balíky osobně přijde dopravce, dispečer mu předá balíky a nechá si v protokolu potvrdit předání balíků.</p>
<p>Zde budeme muset zohlednit různé chování dopravců při předávce balíků.</p>
<h2 id="uc-26-prijem-nedorucenych-baliku-od-dopravce"><a name="UC-26"></a>UC-26 - Příjem nedoručených balíků od dopravce</h2>
<p>Předpokládáme, že dopravce nepřendá interní štítek z jednoho balíku na druhý. Předpokládáme, že interní štítek se může z balíku ztratit nebo se zničit.</p>
<p>Stejný proces jako UC-21 s tím, že balík může mít interní štítek a může být poškozen. Balíky odesíláme pouze spojené s objednávkou a zaplacené, toho lze využít k omezení hledání balíku.</p>
<p>To, že jsme balík už jednou předali dopraci znamená, že byl zaplacen. Tedy do čekací frnty nikdy nepůjde.</p>
<p><img alt="Proces zpracování balíků od dopravce" src="../diagrams/out/uc-26-activity.png" title="Proces zpracování balíků od dopravce" /></p>
<p>Některé kroky jsou zaznamené bez detailních obrazovek, protože jsou už popsane výše. Hledání balíku podle štítku dopravce není popsané, protože bude záviset na detailech, které budem vědět o štítku konkrétního dopravce.</p>
<p>Při přijímaní balíku od dopravce ve všech případech zajistíme, ze interní štítek bude nalepený a změříme a zvážíme balíček.</p>
<h2 id="uc-27-ztraceny-interni-stitek"><a name="UC-27"></a>UC-27 - Ztracený interní štítek</h2>
<p>Identifikace balíku se ztraceným nebo zničeným interním štítkem. Na <a href="../screens/#S-01">hlavním rozcestníku S-01</a> bude odkaz "Poškozený interní štítek". Za ním bude obrazovka na hledání balíku. Dispečer omezí hledání na fronty, nebo stavu, ve kterém balíček našel. Případně podle kódu balíčku, nebo dalších informací na balíku. Po nalezení klikne na "tisk interního štítku" a štítek se mu znovvu vytiskne. Stejně tak se zobrazí roozměry, váha a adresa odeslílatele pro kontrolu.</p>
<p>To, že balík nemá štítek se může stát v libovolné frontě při jakékoliv manipulaci s balíkem.</p>
<h2 id="uc-28-balik-ve-spatne-fronte"><a name="UC-28"></a>UC-28 - Balík ve špatné frontě</h2>
<p>Kdykoliv v nějakém UC dispečer načte interní štítek a zároveň pokud se podaří balík spojit s objednávkou, pak systém ví v jaké má být balík frontě. Systém také ví, jaký UC dispečer vykonává. Když dojde ke stavu, že balík má být v jiné frontě, pak systém zobrazí chybovou obrazovku a řekne dispečerovi, kam má balík dát. Proběhnout by to mělo takto:</p>
<p><img alt="Balík ve špatné frontě" src="../diagrams/out/uc-28-activity.png" title="Balík ve špatné frontě" /></p>
<p>V tomto UC je řešeno zrušení objednávky. Pokud nastane zrušení objednávky, pak se balík posílá na odresu odesílatele nebo zníčí.</p>
<p>Tento UC se provede, kdykoliv v jiném UC dispečer načítá interní štítek.</p>
<h2 id="uc-29-rozdeleni-jednoho-baliku-na-vic"><a name="UC-29"></a>UC-29 - Rozdělení jednoho balíku na víc</h2>
<p>Předpoklady:</p>
<ul>
<li>Dispečer má zobrazený <a href="../screens/#S-05">detail balíku S-05</a>, který bude rozdělen do více balíků.</li>
</ul>
<p>Kroky:</p>
<ol>
<li>Dispečer klikne na tlačítko rozdělit.</li>
<li>Systém vytvoří nový balík, který bude mít následující vlastnosti:<ul>
<li>V historii o tom vznikne záznam s odkazem na nový balík.</li>
<li>Nebude mít interní štítek.</li>
<li>Nebude mít kód balíku.</li>
<li>V historii bude jedinný zaznam o tom, že balík byl vytvořen rozdělením z balíku a odkaz na původní balík.</li>
<li>Zpáteční adresa bude kopie zpáteční adresy z původního balíku.</li>
<li>Doručovací adresa bude kopie doručovací adresy z původního balíku.</li>
<li>Balík bude napojen na stejnou objednávku jako původní balík.</li>
<li>Stav bude odvozen ze stavu objednávky:<ul>
<li>Pokud byla objednávka uhrazená, pak se nový balík vytvoří ve stavu <code>Ve frontě</code>, kde bude čekat na doručení na doručovací adresu.</li>
<li>Pokud objednávka nebyla uhrazená pak se balík vytvoří ve stavu <code>Ve frontě</code>, kde bude čekat na zaplacení.</li>
</ul>
</li>
</ul>
</li>
<li>Systém zobrazí detail nového balíku.</li>
<li>Dispečer zabalí nový balík.</li>
<li>Dispečer přidá nový záznam o měření a vážení balíku.</li>
<li>Dispečer vytvoří a nalepí interní štítek balíku.</li>
<li>Dispečer může od původního balíku vytvořit více balíků.</li>
<li>Dispečer se vrátí k původnímu balíku a </li>
<li>Hotovo.</li>
</ol>
<h2 id="uc-210-tisk-a-nalepeni-stitku"><a name="UC-210"></a>UC-210 - Tisk a nalepení štítku</h2>
<p>Při přijímání balíku a při zpracovná balíků ve frontě pro dopravce je potřeba tisknout interní štíttek nebo štítek dopravce. Jeden štítek nikdy netisknem dvakrát. Je to obrana před náhodným nalepením jednoho štítku na dva balíky.</p>
<p>Předpoklady:</p>
<ul>
<li>Systém zná balík, ke kterému tiskneme štítek.</li>
</ul>
<p>Kroky:</p>
<ol>
<li>Systém zobrazí obrazovku pro <a href="../screens/#S-205">tisk interního štítku S-205</a> nebo obrazovku pro <a href="../screens/#S-212">tisk štítku dopravce S-112</a>.</li>
<li>Zároveň se zobrazením systém provede:<ol>
<li>Vytvoří se nový štítek a napojí se na balík.</li>
<li>Na tiskárnu štítků se pošle pokyn k tisku nového štítku.</li>
</ol>
</li>
<li>Pokud je na balíku takový štítek nebo štítky, kde by mohlo dojít k záměně s právě vysknutým štítkem, pak dispečer zvolí jednu z možností: :<ol>
<li>Odlepí starý štítek  balíku.</li>
<li>Starý štítek znehodnotí. <strong>TODO Jak? Utrhne ho, nebo zamaluje fixou? Neco dalsiho?</strong></li>
</ol>
</li>
<li>Dispečet vezme nový štítek a nalepí ho na balík.</li>
<li>Hotovo.</li>
</ol>
<p>Alternativy:</p>
<ol>
<li>Pokud se nalepení vytisknutého štítku z nějakého důvodu nepovede (štítek se třeba roztrhne), pak dispečer stiskne "Znovu vytisknout". Tím se spustí bod 2. </li>
</ol>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../uc-10/" title="UC-10 - UC-13" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                UC-10 - UC-13
              </span>
            </div>
          </a>
        
        
          <a href="../uc-30/" title="UC-31 - UC-36" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                UC-31 - UC-36
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:".."}})</script>
      
    
  </body>
</html>