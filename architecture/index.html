



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://jajir.github.io/postman/architecture/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>Architektura - Postman</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.adb8469c.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#architektura" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://jajir.github.io/postman/" title="Postman" aria-label="Postman" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Postman
            </span>
            <span class="md-header-nav__topic">
              
                Architektura
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://jajir.github.io/postman/" title="Postman" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Postman
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../analyza/" title="Analýza" class="md-nav__link">
      Analýza
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Usecases
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Usecases
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../uc-00/" title="UC-04 - UC-07" class="md-nav__link">
      UC-04 - UC-07
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../uc-10/" title="UC-10 - UC-13" class="md-nav__link">
      UC-10 - UC-13
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../uc-20/" title="UC-20 - UC-25" class="md-nav__link">
      UC-20 - UC-25
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../uc-30/" title="UC-31 - UC-39" class="md-nav__link">
      UC-31 - UC-39
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../uc-40/" title="UC-40 - UC-49" class="md-nav__link">
      UC-40 - UC-49
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../uc-50/" title="UC-50 - UC-59" class="md-nav__link">
      UC-50 - UC-59
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../states/" title="Stavy" class="md-nav__link">
      Stavy
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../templates/" title="Šablony" class="md-nav__link">
      Šablony
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../screens/" title="Obrazovky" class="md-nav__link">
      Obrazovky
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Architektura
      </label>
    
    <a href="./" title="Architektura" class="md-nav__link md-nav__link--active">
      Architektura
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kod-baliku" class="md-nav__link">
    Kód balíku
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kod-interniho-stitku-baliku" class="md-nav__link">
    Kód interního štítku balíku
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cislo-faktury" class="md-nav__link">
    Číslo faktury
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unifikace-zakazniku" class="md-nav__link">
    Unifikace zákazníků
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entitni-model" class="md-nav__link">
    Entitní model
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objednavka" class="md-nav__link">
    Objednávka
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pouze-priklad-diagramu-pro-pripomenuti" class="md-nav__link">
    Pouze příklad diagramů, pro připomenutí
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#navrh-architektury-applikace" class="md-nav__link">
    Návrh architektury applikace
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auditni-log" class="md-nav__link">
    Auditní log
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zajimave-odkazy" class="md-nav__link">
    Zajímavé odkazy
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../notes/" title="Poznámky" class="md-nav__link">
      Poznámky
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../changelog/" title="Změny" class="md-nav__link">
      Změny
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../how-to-contribute/" title="Jak přispět" class="md-nav__link">
      Jak přispět
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#kod-baliku" class="md-nav__link">
    Kód balíku
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kod-interniho-stitku-baliku" class="md-nav__link">
    Kód interního štítku balíku
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cislo-faktury" class="md-nav__link">
    Číslo faktury
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unifikace-zakazniku" class="md-nav__link">
    Unifikace zákazníků
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#entitni-model" class="md-nav__link">
    Entitní model
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#objednavka" class="md-nav__link">
    Objednávka
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pouze-priklad-diagramu-pro-pripomenuti" class="md-nav__link">
    Pouze příklad diagramů, pro připomenutí
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#navrh-architektury-applikace" class="md-nav__link">
    Návrh architektury applikace
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auditni-log" class="md-nav__link">
    Auditní log
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zajimave-odkazy" class="md-nav__link">
    Zajímavé odkazy
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="architektura">Architektura</h1>
<p>Technický návrh systému.</p>
<p>Nebude možné zde popsat všechny aspekty řešení. Prot jsou zde popsáný pouze části, které mají dopad na UC.</p>
<p>Několik pravidel:</p>
<ul>
<li>Při založení objednávky musí vzniknout instance balíku. Na ní je uložen kód balíku.</li>
<li>Balík, který se při přijetí nepodaří spojit s objednávkou, nemusí mít kód balíku.</li>
</ul>
<h2 id="kod-baliku">Kód balíku</h2>
<p>Kód balíku musí splňovat několik vlastností:</p>
<ul>
<li>I po lidské chybě, jako je záměna dvou znaků, nebo překlep jednoho znaku musíme být schopní balíček dohledat.</li>
<li>Kód se musí pohodlně číst a opisovat.</li>
<li>Nesmí obsahovat znaky, v které se často zaměňují jako jsou:<ul>
<li>nula a velké O</li>
<li>malé L a jedna.</li>
</ul>
</li>
</ul>
<p>Jedno z možných řešení je, že se kód kód bude skládat ze tří pomlčkou oddělených částí po čtyřech znacích: <code>XXXX-XXXX-XXXX</code>. Jednotlivé znaky budem náhodně generovat z těchto skupin:</p>
<ul>
<li>Souhlásky - <code>b, c, d, f, g, h, j, k, m, n, p, r, s, t, v, x, z</code></li>
<li>Samohlásky a číslice - <code>a, e, u, 2, 3, 4, 5, 6, 7, 8, 9</code></li>
</ul>
<p>Každá čtveřice bude vygenerovaná tak, že se budou střídat náhodné znaky z obou skupin. Střídat můžem i pořadí skupin. Například:</p>
<ul>
<li><code>K3GE-DAM8-ERUS</code></li>
<li><code>AT3K-8P3D-B4M6</code></li>
</ul>
<p>To nám dává <code>34 969 = 17 * 17 * 13 * 13</code> kódů v jedné čtveřici, celkem <code>1,16 x 10^14</code> možností.;</p>
<p>Pro každý balík, bude tento kód balíku vygenerovaný a uložený. Když operátor zadá kód balíku, pomocí nějakého algoritmu pro zjištění podobnosti dvou řetězců najdeme ten, který v nějaké toleranci odpovídá. Jako inspirace lze použít  Levenshteinovu vzdálenost.</p>
<p>Je potřeba kontrolovat, jestli už v minulosti nebyl vygenerovaný kód balíku použitý?</p>
<h2 id="kod-interniho-stitku-baliku">Kód interního štítku balíku</h2>
<p>Jedná se o náhodné XXX místné číslo. Toto číslo se přiděluje balíku při přijetí. Významem nemůže být spjaté s objednávkou nebo zákazníkem, protože při přijetí balíku se nemusí podařit dohledat objednávku nebo zákazníka. Kód na interním štítku balíku bude vytištěn jako čárový kód i jako čísla.</p>
<p>Kód interního štítku balíku bude náhodné číslo. Náhodné, abychom je mohli dobře odlišit. Je možné, že budem implementovat hledání podle poškozené části. V aktuálním něvrhu to není.</p>
<h2 id="cislo-faktury">Číslo faktury</h2>
<p>Variabilní symbol pro zaplacení objednávky, číslo objednávky a číslo faktury budou jedna hodnota. Bude to desetimístné náhodně vygenerované číslo. Formát variabilního symbol je, že to je libovolné desetimístné číslo.</p>
<h2 id="unifikace-zakazniku">Unifikace zákazníků</h2>
<p>V některých případech by bylo dobré mít samostatnou entity zákazníka a k ní napojené objednávky. Například bychom mohli lépe určit zákazníka podle čísla účtu příchozí platby. Lze to řešit tak, že se vezmou záznamy, které identifikují zákazníka. Například Jméno, příjmení, telefonní číslo, email: Při založení objednávky se projdou již existující zákazníci a zkusí se, jestli se s nějakou tolerancí nejedná o stejný záznam. Pro porovnání lze u něktrých polí Levenshteinovu zvdálenenost. Případně lze shodu porovnávat pouze podle emailu nebo telefonního čísla.
<strong>Toto teď nebudem implementovat. Zákazníka poznáme podle emailu.</strong></p>
<h2 id="entitni-model">Entitní model</h2>
<h3 id="objednavka">Objednávka</h3>
<p><img alt="Objednávka" src="../diagrams/out/arch-01.png" title="Objednávka" /></p>
<p>Potřebujeme mít někde uloženou objednávku, tak jak jí zadal zákazník?</p>
<h3 id="pouze-priklad-diagramu-pro-pripomenuti">Pouze příklad diagramů, pro připomenutí</h3>
<p><img alt="Test" src="../diagrams/out/arch-05.png" title="Test" /></p>
<h2 id="navrh-architektury-applikace">Návrh architektury applikace</h2>
<p>Z počátku nepotřebujem nic speciálního. Pouze při realizací dávat pozor, že finální UC se mohou lišit od návrhů. Například implementace napojení na konkrétního dopravce může ovlivnost způsob zpracování fronty dopravce. Například požadavek na validaci adresy ze strany dopravce může vést k tomu, že při přijetí balíku a po jeho spárování s objednávkou se musí přidat validace adresy.</p>
<h2 id="auditni-log">Auditní log</h2>
<p>Systém nebude bezpečný. Bude možné vystavit fakturu zákazníkovy, změnit doručovací adaresu a podobné bez obvyklých kontrol. Z těchto důvodů budou změny ukládány do speciálního auditního logu. Log nebude systémem dále využíván. Pro kontrolu by nad ním měl být vybudovaný nějaký jednoduchý BI systém. Auditní log by měl být textový soubor, kde jednotlivé řádky budou představovat jednotlivé události. Událost se bude skládat z několika vhodně oddělenými poli v následujícím poředí:</p>
<ul>
<li>Datum a čas vzniku události.</li>
<li>Kdo událost vyvolal. Zde bude systém, nebo jméno konkrétního uživatele.</li>
<li>V jakém UC byla událost vyvolaná.</li>
<li>O jaký druh entity se jedná.</li>
<li>Identifikace měněné entity.</li>
<li>Popis změny. Například když pracovník změní doručovací adresu, pak by zde měla být nová adresa.</li>
<li>Jakékoliv další informace, které později můžou pomoct.</li>
</ul>
<p>Auditní log by se měl z bezpečnostních důvodů uládat jinam než provozní logy.</p>
<h2 id="zajimave-odkazy">Zajímavé odkazy</h2>
<p>Další informace jsou na:</p>
<ul>
<li>Wikipedia, Kontrolní číslo - <a href="https://en.wikipedia.org/wiki/Check_digit">https://en.wikipedia.org/wiki/Check_digit</a></li>
<li>Wikipedia, Levenshteinova vzdálenost - <a href="https://en.wikipedia.org/wiki/Levenshtein_distance">https://en.wikipedia.org/wiki/Levenshtein_distance</a></li>
<li>Wikipedia, Variabilní symbol - <a href="https://cs.wikipedia.org/wiki/Variabiln%C3%AD_symbol">https://cs.wikipedia.org/wiki/Variabilní_symbol</a></li>
<li>Wikipedia, Čárový kód - <a href="https://cs.wikipedia.org/wiki/Čárový_kód">https://cs.wikipedia.org/wiki/Čárový_kód</a></li>
</ul>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../screens/" title="Obrazovky" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Obrazovky
              </span>
            </div>
          </a>
        
        
          <a href="../notes/" title="Poznámky" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Poznámky
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:".."}})</script>
      
    
  </body>
</html>