# Podpora - práce s objednávkou a balíkem

**TODO - Nesedi číslování UC, nakonci upravit.**

**TODO - Posun objednavek mezi stavy.**

**TODO - Obecne pridat informace auditniho logu k dotcenym UC.**

**TODO - Asi bychom meli mit moznost zakaznikovy z objednavky poslat dodatecnou fakturu, napriklad  za likvidaci baliku, slozite prebalovani, .... Plyne z toho, ze zakaznika, potrebujem evidovat jako samostatnou entitu? Asi ano.**

**TODO UC-44 jak zaznamenat, že zákazník chce vrátit balík?**

**TODO UC-44 jak zaznamenat, že zákazník chce zlikvidovat balík?**

**TODO UC-44 Přidat scénař odeslat na libovolnou adresu. Klient to může chtít?**

**TODO - nevadí to? - Návrh neřeší situaci, kdy zákazník pošle platbu na objednávku, kterou už máme uzavřenou. Máme na to myslet?**

**TODO - Zahrnout pripad, kdy zakaznik zrusi objednavku, ale mi nevime, ze poslal penize, protoze jsou na ceste.**

Každý balík má svůj kód. Kod je nezávislí na objednávce. Kód balíku je to, co zádáme zákaníka, aby napsal na balík. Pokud bude v objednávce víc balíků, pak každý balík bude mít svůj kůd.

V komunikační historii nebude možné záznamy mazat ani upravovat. Záznamy půjde pouze přidávat. Z historie stavů objednávky a balíku bude možné zrekonstruovat celý proces zpracování objednávky a balíku.

Komunikační historie je pouhý textový záznam, informace není nijak strukturovaná.

## <a name="UC-50"></a>UC-50 - Storno objednávky

Zákazník může napsat nebo zavolat a pokusit se zrušit objednávku. V tomto případě pracovník podpory postupuje následovně:

1. Vyhledá objednávku v systému pomocí [hledání objednávek S-10](../screens/#S-10).
1. Zobrazí si [detail hledané objednávky S-04](../screens/#S-04).
1. Na detailu objednávky pracovník zvolí "Detail balíku" a přejde na [S-05](../screens/#S-05).
1. Zde zvolí "Odeslat na zpáteční adresu". Po tom systém změní doručování na doručování zpět. V tomto případě se nekontroluje jestli byla objednávka zaplacena. Balík půjde do fronty dopravce.
1. Pracovník podpory se pomocí odkazu "Detail objednávky" vrátí na [S-04](../screens/#S-04).
1. Pokud již byla částka za dopravu uhrazena, byla zaplaceno, pak musí pracovník [vystavit dobropis a poslat peníze zpět UC-46](../uc-40/#UC-46).
1. Nakonec o všem pořídí záznam do komunikační historie [UC-58](../uc-50/#UC-58). 

Pokud tlačítko "Odeslat na zpáteční adresu" nebude dostupné, pak to znamená, že balík nelze 
Tlačítko Objednávku lze zrušit pokud balík není na cestě k adresátovi. 

** TODO - Jak zrušit balík? Přidat alternati s posíláním na libovolnou adresu.**

Nebudem dělat omezující pravidla na rušení objednávky, jako že nejde zrušit objednávku, když je balík předaný dopravci, protože teď nevím jaké jsou možnosti dopravců.

Nakonec je potřeba zrušit balík. Pracovník z obrazovky [S-04 s detail objednávky](../screens/#S-04)
otevře odkaz na detail balíku. Pokud je balík ve stavu, že to je možné je dostupné tlačítko "Odeslat na zpáteční adresu". Po jesho stisknutí se bulík posune k odeslání na zpáteční adresu.

## <a name="UC-51"></a>UC-51 - Změna doručovací adresy

V některých situacích bude třeba změnit doručovací adresu. 

** TODO - Nejsnažší je upravit doručovací adresu. Přidat její editaci.**

## <a name="UC-52"></a>UC-52 - Spárování dvou balíků

V případě, že zákazník neuvede kód balíku nebo se při dopravě kód poškodí a nepodaří se napárovat balík na objednávku, pak bude třeba toto párování provézt ručně.

## <a name="UC-53"></a>UC-53 - Označení objednávky za zaplacenou

Po tom, co pracovník zadá nové platby bude třeba zkontrolovat, jaké objednávky jsou nově zaplaceny. V tomto scénáři je třeba vyhledat objednávky, které jsou splacené, nebo přeplacené a platba přišla v jednom konkrétním dni. Pracovník podpory bude podtupovat takto:

* Z hlavního rozcestníku otevře [S-011 stránku pro hledání objednávek podel plateb](../screens/#S-011). 
* Uživatel zaškrtne volbu "Vybrat objednávky ve stavu `Nezaplacená`". 
* Potom v zašktne volbu "Vybrat objednávky, kde poslední platba přišla po" a zvolit časový interval.
* Stiskne tlačítko "Hledat"

Systém najde, všechny nezaplacené objednávky, ke kterým v dané období dorazila platba. Pracovník u každého záznamu otevře [S-04 detail objednávky](../screens/#S-04) a zkontroluje, jestli celková zaplacená částka odpovídá fakturované částce. Pokud ano, pracovník potvrdí zaplacení a stiskne tlačítko "Zaplaceno". Objednávka se přesune do stavu doručovaná a v historii stavů se objeví, že daný pracovník podpory pořesunul stav objednávky z nezaplaceno do doručovaná. Pokud je balík k objednávce ve frontě balíků čekajících na zaplacení, pak se při další kontrole přesune k dalšímu doručování.

Pokud je objednávka přeplacená, pak lze po dohodě se zákazníkem vystavid dobropis.

## <a name="UC-54"></a>UC-54 - Reklamace

## <a name="UC-55"></a>UC-55 - Řešení chybové fronty

Balíky v chybové frontě jsou neuspořádané. Některé mají nalepný interní kód některé ne. O každém balíku v chybové frontě je v systému záznam. Zde se pracovník podpory bude snažit najít pro balíky nějaké řešení. Řešení něktrých druhů chyb:

* Chybějící odresa odesílatele.
    * Pracovník podpory se pokusí podle čísla účtu platby dohledat jiné objednávky a podle nich doplnit účet.
* V ostatních případech pracovník podpory zavolá zákazníkovy a společně se domluví na řešení. O dohodě uloží záznam do historie k objednávce.

Po tom, co se podaří na řešení co s balíkem domluvit se zákazníkem pracovník podpory se spojí s dispečerem a balík z chybové fronty pošlou dál.

**Reseni baliku po telefonu je hodne divne, ale nevim, jak vyreseit, ze neketer baliky nemaji interni stitek. tady by pomohlo, kdyby kazdy balik, co prijmem dostal interni stitek.**

**Detailní řešení jednotlivých chyb těď nebudem řešit.**

## <a name="UC-56"></a>UC-56 - Řešení poškozeného balíku

## <a name="UC-57"></a>UC-57 - Řešení naspárovaného balíku

na základě emailu nebo telefonátu.

## <a name="UC-58"></a>UC-58 - Přidat záznam do kontaktní historie

Předpokládáme, že pracovník podpory je na stránce [S-04 detail objednávky](../screens/#S-04). Pro přidání záznamu do komunikační historie bude postupovat následovně:

1. Klikne na "Přidat záznam" a přesune se mu obrazovaku [S-047](../screens/#S-047).
2. Detailně popíše událost.
3. Potvrdí tlačítkem "Vytvořit záznam" a systém pracovníka vrátí na stránku s detailem objednávky.

V kontaktní histori je nově přidaný záznam. Jako autor je uvedený přihlášený uživatel.

